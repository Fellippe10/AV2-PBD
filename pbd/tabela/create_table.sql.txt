
CREATE TABLE Usuarios (
    id                NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    nome              VARCHAR2(255) NOT NULL,
    email             VARCHAR2(255) UNIQUE NOT NULL,
    senha             VARCHAR2(255) NOT NULL,
    telefone          VARCHAR2(20),
    tipo_usuario      VARCHAR2(50) DEFAULT 'Hospede' NOT NULL
);


CREATE TABLE Quartos (
    id                NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    numero            VARCHAR2(10) UNIQUE NOT NULL,
    capacidade        NUMBER NOT NULL,
    tem_banheiro      NUMBER(1) NOT NULL, /* 1 for TRUE, 0 for FALSE */
    tipo_quarto       VARCHAR2(50) NOT NULL
);


CREATE TABLE Vagas (
    id                         NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    quarto_id                  NUMBER NOT NULL,
    numero_vaga                NUMBER NOT NULL,
    descricao_peculiaridades   CLOB,
    disponivel                 NUMBER(1) DEFAULT 1 NOT NULL, /* 1 for TRUE, 0 for FALSE */
    CONSTRAINT fk_vagas_quartos FOREIGN KEY (quarto_id) REFERENCES Quartos(id)
);


CREATE TABLE Reservas (
    id                   NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    usuario_id           NUMBER NOT NULL,
    vaga_id              NUMBER NOT NULL,
    data_checkin         DATE NOT NULL,
    data_checkout        DATE NOT NULL,
    valor_total          NUMBER(10, 2) NOT NULL,
    data_reserva         TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    status_reserva       VARCHAR2(50) DEFAULT 'Pendente' NOT NULL,
    metodo_pagamento     VARCHAR2(50) NOT NULL,
    CONSTRAINT fk_reservas_usuarios FOREIGN KEY (usuario_id) REFERENCES Usuarios(id),
    CONSTRAINT fk_reservas_vagas FOREIGN KEY (vaga_id) REFERENCES Vagas(id)
);


CREATE TABLE Pagamentos (
    id                  NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    reserva_id          NUMBER UNIQUE NOT NULL,
    valor               NUMBER(10, 2) NOT NULL,
    data_pagamento      TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    status_pagamento    VARCHAR2(50) NOT NULL,
    CONSTRAINT fk_pagamentos_reservas FOREIGN KEY (reserva_id) REFERENCES Reservas(id)
);